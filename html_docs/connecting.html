<!DOCTYPE html>
<html lang="en-us">
  <head>
    
<meta charset="UTF-8">
<title>Connecting | Elasticsearch-PHP | Elastic</title>
<meta class="elastic" name="content" content="Connecting | Elasticsearch-PHP">

<link rel="home" href="index.html" title="Elasticsearch-PHP"/>
<link rel="up" href="index.html" title="Elasticsearch-PHP"/>
<link rel="prev" href="installation.html" title="Installation"/>
<link rel="next" href="configuration.html" title="Configuration"/>
<meta class="elastic" name="product_version" content=""/>
<meta class="elastic" name="product_name" content=""/>
<meta class="elastic" name="website_area" content="documentation"/>
<meta name="DC.type" content="Learn/Docs/"/>
<meta name="DC.subject" content=""/>
<meta name="DC.identifier" content=""/>

    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <script src="https://cdn.optimizely.com/js/18132920325.js"></script>
    <link rel="apple-touch-icon" sizes="57x57" href="/apple-icon-57x57.png">
    <link rel="apple-touch-icon" sizes="60x60" href="/apple-icon-60x60.png">
    <link rel="apple-touch-icon" sizes="72x72" href="/apple-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="76x76" href="/apple-icon-76x76.png">
    <link rel="apple-touch-icon" sizes="114x114" href="/apple-icon-114x114.png">
    <link rel="apple-touch-icon" sizes="120x120" href="/apple-icon-120x120.png">
    <link rel="apple-touch-icon" sizes="144x144" href="/apple-icon-144x144.png">
    <link rel="apple-touch-icon" sizes="152x152" href="/apple-icon-152x152.png">
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-icon-180x180.png">
    <link rel="icon" type="image/png" href="/favicon-32x32.png" sizes="32x32">
    <link rel="icon" type="image/png" href="/android-chrome-192x192.png" sizes="192x192">
    <link rel="icon" type="image/png" href="/favicon-96x96.png" sizes="96x96">
    <link rel="icon" type="image/png" href="/favicon-16x16.png" sizes="16x16">
    <link rel="manifest" href="/manifest.json">
    <meta name="apple-mobile-web-app-title" content="Elastic">
    <meta name="application-name" content="Elastic">
    <meta name="msapplication-TileColor" content="#ffffff">
    <meta name="msapplication-TileImage" content="/mstile-144x144.png">
    <meta name="theme-color" content="#ffffff">
    <meta name="naver-site-verification" content="936882c1853b701b3cef3721758d80535413dbfd" />
    <meta name="yandex-verification" content="d8a47e95d0972434" />
    <meta name="localized" content="true" />
    <meta name="st:robots" content="follow,index" />
    <meta property="og:image" content="https://static-www.elastic.co/v3/assets/bltefdd0b53724fa2ce/blt280217a63b82a734/6202d3378b1f312528798412/elastic-logo.svg" />
    <meta property="og:image:width" content="500" />
    <meta property="og:image:height" content="172" />
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
    <link rel="icon" href="/favicon.ico" type="image/x-icon">
    <link rel="apple-touch-icon-precomposed" sizes="64x64" href="/favicon_64x64_16bit.png">
    <link rel="apple-touch-icon-precomposed" sizes="32x32" href="/favicon_32x32.png">
    <link rel="apple-touch-icon-precomposed" sizes="16x16" href="/favicon_16x16.png">
    <!-- Give IE8 a fighting chance -->
    <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
    <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
    <link rel="stylesheet" type="text/css" href="/guide/static/styles.css" />
  </head>

  <!--© 2015-2022 Elasticsearch B.V. -->
  <!-- All Elastic documentation is licensed under a Creative Commons Attribution-NonCommercial-NoDerivatives 4.0 International License. -->
  <!-- http://creativecommons.org/licenses/by-nc-nd/4.0/ -->

  <body>
    <!-- Google Tag Manager -->
    <script>dataLayer = [];</script><noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-58RLH5" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start': new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0], j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src= '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f); })(window,document,'script','dataLayer','GTM-58RLH5');</script>
    <!-- End Google Tag Manager -->

    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-12395217-16"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'UA-12395217-16');
    </script>

    <!-- Google Tag Manager for GA4 -->
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start': new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0], j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src='https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);})(window,document,'script','dataLayer','GTM-KNJMG2M');</script>
    <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-KNJMG2M" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <!-- End Google Tag Manager for GA4-->

    <div id='elastic-nav' style="display:none;"></div>
    <script src='https://www.elastic.co/elastic-nav.js'></script>

    <div class="main-container">
      <section id="content" >
        <div class="content-wrapper">

          <section id="guide" lang="en">
            <div class="container-fluid">
              <div class="row pb-3">
                <div class="col-12 order-2 col-md-4 order-md-1 col-lg-3 h-almost-full-md sticky-top-md" id="left_col">
                  <!-- The TOC is appended here -->
                </div>

                <div class="col-12 order-1 col-md-8 order-md-2 col-lg-7 order-lg-2 guide-section" id="middle_col">
                  <!-- start body -->
                  
<div id="content">
<div class="breadcrumbs">
<span class="breadcrumb-link"><a href="/guide/">Elastic Docs</a></span>
<span class="chevron-right">›</span><span class="breadcrumb-link"><a href="index.html">Elasticsearch-PHP</a></span>
</div>
<div class="navheader">
<span class="prev">
<a href="installation.html">« Installation</a>
</span>
<span class="next">
<a href="configuration.html">Configuration »</a>
</span>
</div>
<div class="chapter">
<div class="titlepage"><div><div>
<h1 class="title"><a id="connecting"></a>Connecting<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch-php/edit/master/docs/connecting.asciidoc">edit</a></h1>
</div></div></div>
<p>This page contains the information you need to connect and use the Client with
Elasticsearch.</p>
<p><span class="strong strong"><strong>On this page</strong></span></p>
<div class="ulist itemizedlist">
<ul class="itemizedlist">
<li class="listitem">
<a class="xref" href="connecting.html#auth-ec" title="Elastic Cloud">Elastic Cloud</a>
</li>
<li class="listitem">
<a class="xref" href="connecting.html#auth-http" title="Security by default (HTTPS)">Security by default (HTTPS)</a>
</li>
</ul>
</div>
<h3><a id="auth-ec"></a>Elastic Cloud<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch-php/edit/master/docs/connecting.asciidoc">edit</a></h3>
<p>You can connect to <a href="https://www.elastic.co/cloud/" class="ulink" target="_top">Elastic Cloud</a> using an <span class="strong strong"><strong>API key</strong></span>
and a <span class="strong strong"><strong>Cloud ID</strong></span>:</p>
<div class="pre_wrapper lang-php">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-php">$client = ClientBuilder::create()
   -&gt;setElasticCloudId('&lt;cloud-id&gt;')
   -&gt;setApiKey('&lt;api-key&gt;')
   -&gt;build();</pre>
</div>
<p>Where &lt;cloud-id&gt; and &lt;api-key&gt; can be retrieved using the Elastic Cloud web UI.</p>
<p>You can get the <code class="literal">Cloud ID</code> from the <code class="literal">My deployment</code> page of your dashboard (see the red
rectangle reported in the screenshot).</p>
<div class="imageblock text-center">
<div class="content">
<img src="images/cloud_id.png" alt="Elastic Cloud ID">
</div>
</div>
<p>You can generate an <code class="literal">API key</code> in the <code class="literal">Management</code> page under the section <code class="literal">Security</code>.</p>
<div class="imageblock text-center">
<div class="content">
<img src="images/create_api_key.png" alt="Create API key">
</div>
</div>
<p>When you click on <code class="literal">Create API key</code> button you can choose a name and set the other
options (eg. restrict privileges, expire after time, etc).</p>
<div class="imageblock text-center">
<div class="content">
<img src="images/api_key_name.png" alt="Choose an API name">
</div>
</div>
<p>After this step you will get the `API key`in the API keys page.</p>
<div class="imageblock text-center">
<div class="content">
<img src="images/cloud_api_key.png" alt="Cloud API key">
</div>
</div>
<p><span class="strong strong"><strong>IMPORTANT</strong></span>: you need to copy and store the `API key`in a secure place, since you will not
be able to view it again in Elastic Cloud.</p>
<h3><a id="auth-http"></a>Security by default (HTTPS)<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch-php/edit/master/docs/connecting.asciidoc">edit</a></h3>
<p>Elasticsearch 8.0 offers <a href="https://www.elastic.co/blog/introducing-simplified-elastic-stack-security" class="ulink" target="_top">security by default</a>,
that means it uses <a href="https://en.wikipedia.org/wiki/Transport_Layer_Security" class="ulink" target="_top">TLS</a>
for protect the communication between client and server.</p>
<p>In order to configure <code class="literal">elasticsearch-php</code> for connecting to Elasticsearch 8.0 we
need to have the certificate authority file (CA).</p>
<p>You can install Elasticsearch in different ways, for instance using <a href="https://www.elastic.co/guide/en/elasticsearch/reference/current/docker.html" class="ulink" target="_top">Docker</a>
you need to execute the followind command:</p>
<div class="pre_wrapper lang-shell">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-shell">docker pull docker.elastic.co/elasticsearch/elasticsearch:8.0.1</pre>
</div>
<p>Once you have the docker image installed you can execute Elasticsearch,
for instance using a single-node cluster configuration, as follows:</p>
<div class="pre_wrapper lang-shell">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-shell">docker network create elastic
docker run --name es01 --net elastic -p 9200:9200 -p 9300:9300 -it docker.elastic.co/elasticsearch/elasticsearch:8.0.1</pre>
</div>
<p>This command creates an <code class="literal">elastic</code> Docker network and start Elasticsearch
using the port <code class="literal">9200</code> (default).</p>
<p>When you run the docker image a password is generated for the <code class="literal">elastic</code> user
and it&#8217;s printed to the terminal (you might need to scroll back a bit in the terminal
to view it). You have to copy it since we will need to connect to Elasticsearch.</p>
<p>Now that Elasticsearch is running we can get the <code class="literal">http_ca.crt</code> file certificate.
We need to copy it from the docker instance, using the following command:</p>
<div class="pre_wrapper lang-shell">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-shell">docker cp es01:/usr/share/elasticsearch/config/certs/http_ca.crt .</pre>
</div>
<p>Once we have the <code class="literal">http_ca.crt</code> certificate and the <code class="literal">password</code>, copied during the
start of Elasticsearch , we can use it to connect with <code class="literal">elasticsearch-php</code>
as follows:</p>
<div class="pre_wrapper lang-php">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-php">$client = ClientBuilder::create()
    -&gt;setHosts(['https://localhost:9200'])
    -&gt;setBasicAuthentication('elastic', 'password copied during Elasticsearch start')
    -&gt;setCABundle('path/to/http_ca.crt')
    -&gt;build();</pre>
</div>
<p>For more information about the Docker configuration of Elasticsearch you can
read the official documentation <a href="https://www.elastic.co/guide/en/elasticsearch/reference/current/docker.html" class="ulink" target="_top">here</a>.</p>
<h3><a id="client-usage"></a>Usage<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch-php/edit/master/docs/usage.asciidoc">edit</a></h3>
<p>This section is a crash-course overview of the client and its syntax. If you
are familiar with Elasticsearch, you&#8217;ll notice that the methods are named just like REST
endpoints.</p>
<p>You may also notice that the client is configured in a manner that facilitates
easy discovery via your IDE. All core actions are available under the <code class="literal">$client</code>
object (indexing, searching, getting, etc). Index and cluster management are
located under the <code class="literal">$client-&gt;indices()</code> and <code class="literal">$client-&gt;cluster()</code> objects,
respectively.</p>
<h4><a id="_info_api"></a>Info API<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch-php/edit/master/docs/usage.asciidoc">edit</a></h4>
<p>You can get information about the Elasticsearch instance using the <code class="literal">info()</code> API,
as follows:</p>
<div class="pre_wrapper lang-php">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-php">$response = $client-&gt;info();</pre>
</div>
<p>The response that you get back contains the information about Elasticsearch.
The <code class="literal">$response</code> is an object of <code class="literal">Elastic\Elasticsearch\Response\Elasticsearch</code>
class that implements <code class="literal">ElasticsearchInterface</code>, PSR-7 <a href="https://www.php-fig.org/psr/psr-7/#33-psrhttpmessageresponseinterface" class="ulink" target="_top">ResponseInterface</a>
and <a href="https://www.php.net/manual/en/class.arrayaccess.php" class="ulink" target="_top">ArrayAccess</a>.</p>
<p>This means the <code class="literal">$response</code> is a <a href="https://www.php-fig.org/psr/psr-7/" class="ulink" target="_top">PSR-7</a>
object:</p>
<div class="pre_wrapper lang-php">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-php">echo $response-&gt;getStatusCode(); // 200
echo (string) $response-&gt;getBody(); // Response body in JSON</pre>
</div>
<p>and also an "array", meaning you can access the response body as an
associative array, as follows:</p>
<div class="pre_wrapper lang-php">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-php">echo $response['version']['number']; // 8.0.0

var_dump($response-&gt;asArray());  // response body content as array</pre>
</div>
<p>Moreover, you can also access the response body as object, string or bool:</p>
<div class="pre_wrapper lang-php">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-php">echo $response-&gt;version-&gt;number; // 8.0.0

var_dump($response-&gt;asObject()); // response body content as object
var_dump($response-&gt;asString()); // response body as string (JSON)
var_dump($response-&gt;asBool());   // true if HTTP response code between 200 and 300</pre>
</div>
<h4><a id="_indexing_a_document"></a>Indexing a document<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch-php/edit/master/docs/usage.asciidoc">edit</a></h4>
<p>To index a document, we need to specify three pieces of information: index, id
and a document body. This is done by constructing an associative array of
key:value pairs. The request body is itself an associative array with key:value
pairs corresponding to the data in your document:</p>
<div class="pre_wrapper lang-php">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-php">$params = [
    'index' =&gt; 'my_index',
    'id'    =&gt; 'my_id',
    'body'  =&gt; ['testField' =&gt; 'abc']
];

$response = $client-&gt;index($params);
print_r($response-&gt;asArray());</pre>
</div>
<p>The response that you get back indicates that the document was created in the
index that you specified. The response can be rendered as associatve array
using the <code class="literal">asArray()</code> function. The array response contains a
decoded version of the JSON that Elasticsearch returns:</p>
<div class="pre_wrapper lang-php">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-php">Array
(
    [_index] =&gt; my_index
    [_type] =&gt; _doc
    [_id] =&gt; my_id
    [_version] =&gt; 1
    [created] =&gt; 1
)</pre>
</div>
<h4><a id="_set_the_body_as_json_string"></a>Set the body as JSON string<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch-php/edit/master/docs/usage.asciidoc">edit</a></h4>
<p>If you want you can specify the `body`parameter as JSON string. This can be
useful for testing (eg. copy &amp; paste from online code examples) or if you
have already some JSON documents to be stored in Elasticsearch.</p>
<p>For instance, the previous index example can be re-written as follows:</p>
<div class="pre_wrapper lang-php">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-php">$params = [
    'index' =&gt; 'my_index',
    'id'    =&gt; 'my_id',
    'body'  =&gt; '{"testField" : "abc"}'
];

$response = $client-&gt;index($params);
print_r($response-&gt;asArray());</pre>
</div>
<h4><a id="_getting_a_document"></a>Getting a document<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch-php/edit/master/docs/usage.asciidoc">edit</a></h4>
<p>Let&#8217;s get the document that we just indexed. This returns the document:</p>
<div class="pre_wrapper lang-php">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-php">$params = [
    'index' =&gt; 'my_index',
    'id'    =&gt; 'my_id'
];

$response = $client-&gt;get($params);
print_r($response-&gt;asArray());</pre>
</div>
<p>The response contains metadata such as index, version, and so on as well as a
<code class="literal">_source</code> field, which is the original document you sent to Elasticsearch.</p>
<div class="pre_wrapper lang-php">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-php">Array
(
    [_index] =&gt; my_index
    [_type] =&gt; _doc
    [_id] =&gt; my_id
    [_version] =&gt; 1
    [found] =&gt; 1
    [_source] =&gt; Array
        (
            [testField] =&gt; abc
        )

)</pre>
</div>
<h4><a id="_searching_for_a_document"></a>Searching for a document<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch-php/edit/master/docs/usage.asciidoc">edit</a></h4>
<p>Searching is a hallmark of Elasticsearch, so let&#8217;s perform a search. We are going to use
the <code class="literal">match</code> query as a demonstration:</p>
<div class="pre_wrapper lang-php">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-php">$params = [
    'index' =&gt; 'my_index',
    'body'  =&gt; [
        'query' =&gt; [
            'match' =&gt; [
                'testField' =&gt; 'abc'
            ]
        ]
    ]
];

$response = $client-&gt;search($params);
print_r($response-&gt;asArray());</pre>
</div>
<p>The response here is different from the previous ones. You can see metadata
(<code class="literal">took</code>, <code class="literal">timed_out</code>, etc.) and an array named <code class="literal">hits</code>. This represents your
search results. Inside of <code class="literal">hits</code> is another array named <code class="literal">hits</code>, which contains
individual search results:</p>
<div class="pre_wrapper lang-php">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-php">Array
(
    [took] =&gt; 1
    [timed_out] =&gt;
    [_shards] =&gt; Array
        (
            [total] =&gt; 5
            [successful] =&gt; 5
            [failed] =&gt; 0
        )

    [hits] =&gt; Array
        (
            [total] =&gt; 1
            [max_score] =&gt; 0.30685282
            [hits] =&gt; Array
                (
                    [0] =&gt; Array
                        (
                            [_index] =&gt; my_index
                            [_type] =&gt; _doc
                            [_id] =&gt; my_id
                            [_score] =&gt; 0.30685282
                            [_source] =&gt; Array
                                (
                                    [testField] =&gt; abc
                                )
                        )
                )
        )
)</pre>
</div>
<h4><a id="_deleting_a_document"></a>Deleting a document<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch-php/edit/master/docs/usage.asciidoc">edit</a></h4>
<p>Alright, let&#8217;s go ahead and delete the document that we added previously:</p>
<div class="pre_wrapper lang-php">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-php">$params = [
    'index' =&gt; 'my_index',
    'id'    =&gt; 'my_id'
];

$response = $client-&gt;delete($params);
print_r($response-&gt;asArray());</pre>
</div>
<p>This syntax is identical to the <code class="literal">get</code> syntax. The only difference is the
operation: <code class="literal">delete</code> instead of <code class="literal">get</code>. The response confirms the document is
deleted:</p>
<div class="pre_wrapper lang-php">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-php">Array
(
    [found] =&gt; 1
    [_index] =&gt; my_index
    [_type] =&gt; _doc
    [_id] =&gt; my_id
    [_version] =&gt; 2
)</pre>
</div>
<h4><a id="_deleting_an_index_2"></a>Deleting an index<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch-php/edit/master/docs/usage.asciidoc">edit</a></h4>
<p>Due to the dynamic nature of Elasticsearch, the first document you added automatically
built an index with some default settings. Delete that index and specify your
own settings later:</p>
<div class="pre_wrapper lang-php">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-php">$deleteParams = [
    'index' =&gt; 'my_index'
];
$response = $client-&gt;indices()-&gt;delete($deleteParams);
print_r($response-&gt;asArray());</pre>
</div>
<p>The response:</p>
<div class="pre_wrapper lang-php">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-php">Array
(
    [acknowledged] =&gt; 1
)</pre>
</div>
<h4><a id="_creating_an_index_2"></a>Creating an index<a class="edit_me" rel="nofollow" title="Edit this page on GitHub" href="https://github.com/elastic/elasticsearch-php/edit/master/docs/usage.asciidoc">edit</a></h4>
<p>Now that you are starting fresh (no data or index), add a new index with custom
settings:</p>
<div class="pre_wrapper lang-php">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-php">$params = [
    'index' =&gt; 'my_index',
    'body' =&gt; [
        'settings' =&gt; [
            'number_of_shards' =&gt; 2,
            'number_of_replicas' =&gt; 0
        ]
    ]
];

$response = $client-&gt;indices()-&gt;create($params);
print_r($response-&gt;asArray());</pre>
</div>
<p>Elasticsearch now creates that index with your chosen settings and return an
acknowledgement:</p>
<div class="pre_wrapper lang-php">
<div class="console_code_copy" title="Copy to clipboard"></div>
<pre class="programlisting prettyprint lang-php">Array
(
    [acknowledged] =&gt; 1
)</pre>
</div>
</div>
<div class="navfooter">
<span class="prev">
<a href="installation.html">« Installation</a>
</span>
<span class="next">
<a href="configuration.html">Configuration »</a>
</span>
</div>
</div>

                  <!-- end body -->
                </div>

                <div class="col-12 order-3 col-lg-2 order-lg-3 h-almost-full-lg sticky-top-lg" id="right_col">
                  <div id="sticky_content">
                    <!-- The OTP is appended here -->
                    <div class="row">
                      <div class="col-0 col-md-4 col-lg-0" id="bottom_left_col"></div>
                      <div class="col-12 col-md-8 col-lg-12">
                        <div id="rtpcontainer">
                          <div class="mktg-promo" id="most-popular">
                            <p class="aside-heading">Most Popular</p>
                            <div class="pb-2">
                              <p class="media-type">Video</p>
                              <a href="https://www.elastic.co/webinars/getting-started-elasticsearch?page=docs&placement=top-video">
                                <p class="mb-0">Get Started with Elasticsearch</p>
                              </a>
                            </div>
                            <div class="pb-2">
                              <p class="media-type">Video</p>
                              <a href="https://www.elastic.co/webinars/getting-started-kibana?page=docs&placement=top-video">
                                <p class="mb-0">Intro to Kibana</p>
                              </a>
                            </div>
                            <div class="pb-2">
                              <p class="media-type">Video</p>
                              <a href="https://www.elastic.co/webinars/introduction-elk-stack?page=docs&placement=top-video">
                                <p class="mb-0">ELK for Logs & Metrics</p>
                              </a>
                            </div>
                          </div>
                        </div>

                        <!-- Feedback widget -->
                        <div id="feedbackWidgetContainer"></div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </section>

        </div>


        <div id='elastic-footer'></div>
        <script src='https://www.elastic.co/elastic-footer.js'></script>
        <!-- Footer Section end-->

      </section>
    </div>

    <!-- Feedback modal -->
    <div id="feedbackModalContainer"></div>

    <script src="/guide/static/jquery.js"></script>
    <script type="text/javascript" src="/guide/static/docs.js"></script>
    <script type="text/javascript">
  window.initial_state = {}</script>
  </body>
</html>
